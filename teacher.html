<script>
let timeLeft = 60;

function generateQR(){
    const token = "attendance_" + Date.now();
    const url = "https://tanadolrattanasiri-dotcom.github.io/QKline/scan.html?code=" + token;

    document.getElementById("qrcode").innerHTML="";

    QRCode.toCanvas(document.createElement("canvas"), url, function(error, canvas){
        document.getElementById("qrcode").appendChild(canvas);
    });
}

function countdown(){
    setInterval(()=>{
        timeLeft--;
        document.getElementById("time").innerText=timeLeft;

        if(timeLeft<=0){
            timeLeft=60;
            generateQR();
        }
    },1000);
}

generateQR();
countdown();
</script>
